{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}

  <div class="text-center mb-4">
    <h1 class="mb-3">🤖 Product list</h1>

    <form method="get" class="d-flex justify-content-center gap-2" style="max-width: 500px; margin: 0 auto;">
      <div class="flex-grow-1">
        {{ search_form|crispy }}
      </div>
      <div>
        <input type="submit" class="btn btn-outline-dark" value="🔍">
      </div>
    </form>
  </div>
  <hr>

  {% for product in product_list %}
    <div class="border rounded p-2 mb-3 bg-dark text-white d-flex align-items-center gap-3 shadow-sm"
         style="width: 90%; margin-left: 5%">

      {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width: 160px; height: auto; border-radius: 10px;">
      {% else %}
        <div style="width: 120px; height: 120px; background-color: #eee; border-radius: 10px;"></div>
      {% endif %}

      <div class="flex-grow-1">
        <div class="mb-2">
          <a href="{% url 'store:product-detail' pk=product.id %}">
            <strong style="font-size: 20px; color: white">{{ product.name }}</strong>
          </a>
          <strong style="font-size: 20px; float: right; margin-right: 10px">Price: {{ product.price }}$</strong>
        </div>

        <div class="mb-2">
          Category: <span style="margin: 5px" class="badge bg-secondary">{{ product.category.name }}</span><br>
          Memory: <span  style="margin: 5px"class="badge bg-secondary">{{ product.memory }}GB</span><br>
          Color: <span style="margin: 5px" class="badge bg-secondary">{{ product.color }}</span>
          <a class="btn btn-primary btn-sm" style="float: right; width: 100px; margin-right: 10px"
             href="{% url 'store:product-detail' pk=product.id %}">Detail</a>
        </div>
      </div>

    </div>
  {% empty %}
    <h3>There are no products yet.</h3>
  {% endfor %}

{% endblock %}
